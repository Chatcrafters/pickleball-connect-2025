{% extends "base.html" %}
{% block title %}Import Matches - WPC{% endblock %}

{% block content %}
<style>
    .import-container { max-width: 1000px; margin: 0 auto; padding: 20px; }
    .card { background: white; border-radius: 16px; padding: 25px; box-shadow: 0 4px 20px rgba(0,0,0,0.1); margin-bottom: 20px; }
    .card-title { font-size: 1.2rem; font-weight: 700; color: #1a472a; margin-bottom: 20px; }
    .stats-row { display: flex; gap: 20px; margin-bottom: 20px; flex-wrap: wrap; }
    .stat-box { background: #f8f9fa; border-radius: 12px; padding: 20px; text-align: center; flex: 1; min-width: 150px; }
    .stat-value { font-size: 2rem; font-weight: 700; color: #2E9E4B; }
    .stat-label { color: #666; font-size: 0.9rem; }
    .form-group { margin-bottom: 20px; }
    .form-label { font-weight: 600; color: #333; margin-bottom: 8px; display: block; }
    .form-control { width: 100%; padding: 12px; border: 2px solid #e0e0e0; border-radius: 8px; font-size: 1rem; box-sizing: border-box; }
    textarea.form-control { min-height: 300px; font-family: monospace; font-size: 0.85rem; }
    .btn { padding: 12px 25px; border: none; border-radius: 8px; font-weight: 600; cursor: pointer; font-size: 1rem; }
    .btn-primary { background: #2E9E4B; color: white; }
    .btn-danger { background: #e74c3c; color: white; }
    .btn-secondary { background: #f0f0f0; color: #333; text-decoration: none; display: inline-block; }
    .date-item { display: flex; justify-content: space-between; align-items: center; padding: 12px; background: #f8f9fa; border-radius: 8px; margin-bottom: 8px; }
    .hint { background: #e8f5e9; border-left: 4px solid #2E9E4B; padding: 15px; border-radius: 0 8px 8px 0; margin-top: 15px; }
</style>

<div class="import-container">
    <h1 style="color:#1a472a;margin-bottom:20px;">Import Match Schedule</h1>
    
    {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
            {% for category, message in messages %}
            <div class="alert alert-{{ category }}" style="padding:15px;border-radius:8px;margin-bottom:20px;background:{% if category == 'success' %}#d4edda{% else %}#f8d7da{% endif %};">{{ message }}</div>
            {% endfor %}
        {% endif %}
    {% endwith %}
    
    <div class="stats-row">
        <div class="stat-box">
            <div class="stat-value">{{ total_matches }}</div>
            <div class="stat-label">Total Matches</div>
        </div>
        <div class="stat-box">
            <div class="stat-value">{{ dates|length }}</div>
            <div class="stat-label">Days</div>
        </div>
    </div>
    
    {% if dates %}
    <div class="card">
        <div class="card-title">Imported Days</div>
        {% for d, count in dates %}
        <div class="date-item">
            <span>{{ d.strftime('%a %d %b %Y') }} - {{ count }} matches</span>
            <form method="POST" action="{{ url_for('wpc_matches.clear_matches') }}" style="margin:0;">
                <input type="hidden" name="date" value="{{ d.strftime('%Y-%m-%d') }}">
                <button type="submit" class="btn btn-danger" style="padding:6px 12px;font-size:0.85rem;">Clear</button>
            </form>
        </div>
        {% endfor %}
    </div>
    {% endif %}
    
    <div class="card">
        <div class="card-title">Import New Schedule</div>
        <form method="POST">
            <div class="form-group">
                <label class="form-label">Match Date</label>
                <input type="date" name="match_date" class="form-control" required style="max-width:250px;">
            </div>
            <div class="form-group">
                <label class="form-label">Schedule Text</label>
                <textarea name="schedule_text" class="form-control" placeholder="Paste schedule here..."></textarea>
            </div>
            <button type="submit" class="btn btn-primary">Import Matches</button>
        </form>
        <div class="hint">
            <strong>How to use:</strong> Copy the schedule text from Pickleball Global exactly as shown.
        </div>
    </div>
    
    <a href="{{ url_for('wpc.admin_dashboard') }}" class="btn btn-secondary">Back to Dashboard</a>
</div>
{% endblock %}
